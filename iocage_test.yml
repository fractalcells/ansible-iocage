---

- hosts: "{{ test_iocage|default('localhost') }}"
  gather_facts: false
  become: true
  become_method: sudo

  vars:

    python_required: "36"
    jname: test_jail
    release: 13.0-RELEASE
    label: 13_0_RELEASE
    basejail: "test_basejail_{{ label }}"
    debug: false
    debug2: false

  tasks:

      # setup - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    - ansible.builtin.import_tasks: tasks/sanity.yml
      vars:
        _test_name: sanity
      tags: sanity
    - ansible.builtin.import_tasks: tasks/facts.yml
      vars:
        _test_name: facts
      tags: facts
    - ansible.builtin.import_tasks: tasks/fetch.yml
      vars:
        _test_name: fetch
      tags: fetch

      # base - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    - ansible.builtin.import_tasks: tasks/base_create.yml
      vars:
        _test_name: base_create
      tags: base_create
    - ansible.builtin.import_tasks: tasks/base_exists.yml
      vars:
        _test_name: base_exists
      tags: base_exists
    - ansible.builtin.import_tasks: tasks/base_set.yml
      vars:
        _test_name: base_set
      tags: base_set
    - ansible.builtin.import_tasks: tasks/base_clone.yml
      vars:
        _test_name: base_clone
      tags: base_clone

      # jail - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    - ansible.builtin.import_tasks: tasks/jail_absent.yml
      vars:
        _test_name: jail_absent
      tags: jail_absent
    - ansible.builtin.import_tasks: tasks/jail_restore.yml
      vars:
        _test_name: jail_restore
      tags: jail_restore

      # template - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    - ansible.builtin.import_tasks: tasks/template_create.yml
      vars:
        _test_name: template_create
      tags: template_create
    - ansible.builtin.import_tasks: tasks/template_start.yml
      vars:
        _test_name: template_start
      tags: template_start
    - ansible.builtin.import_tasks: tasks/template_start_force.yml
      vars:
        _test_name: template_start_force
      tags: template_start_force
    - ansible.builtin.import_tasks: tasks/template_stop.yml
      vars:
        _test_name: template_stop
      tags: template_stop

      # absent - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    - ansible.builtin.import_tasks: tasks/absent_absent.yml
      vars:
        _test_name: absent_absent
      tags: absent_absent
    - ansible.builtin.import_tasks: tasks/absent_stop.yml
      vars:
        _test_name: absent_stop
      tags: absent_stop
    - ansible.builtin.import_tasks: tasks/absent_restart.yml
      vars:
        _test_name: absent_restart
      tags: absent_restart
    - ansible.builtin.import_tasks: tasks/absent_start.yml
      vars:
        _test_name: absent_start
      tags: absent_start

      # test everything - - - - - - - - - - - - - - - - - - - - - - - - - - - -

    - ansible.builtin.import_tasks: tasks/test_present.yml
      vars:
        _test_name: test_present
      tags: [test_present, test_all]
    - ansible.builtin.import_tasks: tasks/test_absent.yml
      vars:
        _test_name: test_absent
      tags: [test_absent, test_all]
    - ansible.builtin.import_tasks: tasks/test_clone.yml
      vars:
        _test_name: test_clone
      tags: [test_clone, test_all]
    - ansible.builtin.import_tasks: tasks/test_pkg.yml
      vars:
        _test_name: test_pkg
      tags: [test_pkg, test_all]
    - ansible.builtin.import_tasks: tasks/test_start.yml
      vars:
        _test_name: test_start
      tags: [test_start, test_all]
    - ansible.builtin.import_tasks: tasks/test_start2.yml
      vars:
        _test_name: test_start2
      tags: [test_start2, test_all]
    - ansible.builtin.import_tasks: tasks/test_exec.yml
      vars:
        _test_name: test_exec
      tags: [test_exec, test_all]
    - ansible.builtin.import_tasks: tasks/test_restart.yml
      vars:
        _test_name: test_restart
      tags: [test_restart, test_all]
    - ansible.builtin.import_tasks: tasks/test_stop.yml
      vars:
        _test_name: test_stop
      tags: [test_stop, test_all]
    - ansible.builtin.import_tasks: tasks/test_start3.yml
      vars:
        _test_name: test_start3
      tags: [test_start3, test_all]
    - ansible.builtin.import_tasks: tasks/test_absent2.yml
      vars:
        _test_name: test_absent2
      tags: [test_absent2, test_all]
    - ansible.builtin.import_tasks: tasks/test_absent3.yml
      vars:
        _test_name: test_absent3
      tags: [test_absent3, test_all]
